(function(t){function e(e){for(var n,a,i=e[0],c=e[1],u=e[2],p=0,d=[];p<i.length;p++)a=i[p],s[a]&&d.push(s[a][0]),s[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(d.length)d.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],n=!0,i=1;i<r.length;i++){var c=r[i];0!==s[c]&&(n=!1)}n&&(o.splice(e--,1),t=a(a.s=r[0]))}return t}var n={},s={app:0},o=[];function a(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=n,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(r,n,function(e){return t[e]}.bind(null,n));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";var n=r("64a9"),s=r.n(n);s.a},"56d7":function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("f751"),r("097d");var n=r("2b0e"),s=r("ce5b"),o=r.n(s),a=r("31bd"),i=r("8c4f"),c=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.$store.state.isUserLoggedIn?r("div",{staticClass:"container"},[r("h1",[t._v("Latest Posts")]),r("div",{staticClass:"create-post"},[r("form",{attrs:{enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),t.createPost(e)}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"category"}},[t._v("\n          Category\n        ")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.category,expression:"form.category"}],staticClass:"form-control",attrs:{type:"text",name:"category"},domProps:{value:t.form.category},on:{input:function(e){e.target.composing||t.$set(t.form,"category",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"title"}},[t._v("\n          Title\n        ")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"form-control",attrs:{type:"text",name:"title"},domProps:{value:t.form.title},on:{input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"description"}},[t._v("\n          Description\n        ")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.description,expression:"form.description"}],staticClass:"form-control",attrs:{type:"text",name:"description"},domProps:{value:t.form.description},on:{input:function(e){e.target.composing||t.$set(t.form,"description",e.target.value)}}})]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.latitude,expression:"form.latitude"}],attrs:{type:"hidden",id:"lat",name:"latitude"},domProps:{value:t.form.latitude},on:{input:function(e){e.target.composing||t.$set(t.form,"latitude",e.target.value)}}}),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.longitude,expression:"form.longitude"}],attrs:{type:"hidden",id:"lon",name:"longitude"},domProps:{value:t.form.longitude},on:{input:function(e){e.target.composing||t.$set(t.form,"longitude",e.target.value)}}}),t._m(0),r("input",{ref:"file",attrs:{type:"file",name:"photo"},on:{change:t.selectFile}}),r("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("\n        Upload Photo\n      ")])])]),r("hr"),t.error?r("p",{staticClass:"error"},[t._v(t._s(t.error)+" ")]):t._e(),r("div",{staticClass:"posts-container"},t._l(t.posts,function(e,n){return r("div",{key:e._id,staticClass:"post",attrs:{item:e,index:n},on:{dblclick:function(r){return t.deletePost(e._id)}}},[r("p",{staticClass:"text"},[t._v(t._s(e.category))]),r("img",{staticClass:"img-responsive",attrs:{src:e.thumbnailPath}}),r("br"),t._v("\n      "+t._s(""+e.title)+"\n      "),r("br"),t._v("\n      "+t._s(""+e.description)+"\n\n    ")])}),0)]):t._e()},u=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"coordinates"}},[t._v("Coordinates")])])}],l=(r("96cf"),r("3b8d")),p=r("cebc"),d=r("795b"),m=r.n(d),f=r("d225"),v=r("b0b4"),g=r("bc3a"),h="https://localhost:3000/api/posts/",b=function(){function t(){Object(f["a"])(this,t)}return Object(v["a"])(t,null,[{key:"getPosts",value:function(){return new m.a(function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(e,r){var n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.get(h);case 3:n=t.sent,s=n.data,e(s.map(function(t){return Object(p["a"])({},t)})),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),r(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}));return function(e,r){return t.apply(this,arguments)}}())}},{key:"insertPost",value:function(t){return g.post(h+"/upload",{form:t})}},{key:"deletePost",value:function(t){return g.delete("".concat(h).concat(t))}}]),t}(),w=b,y=r("bc3a"),_=r.n(y),x="https://localhost:3000/api/posts",k={name:"PostComponent",data:function(){return{posts:[],error:"",form:{category:"",title:"",description:"",coordinates:{latitude:"",longitude:""},photo:""}}},created:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.getPosts();case 3:this.posts=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),this.error=t.t0.message;case 9:case"end":return t.stop()}},t,this,[[0,6]])}));function e(){return t.apply(this,arguments)}return e}(),methods:{selectFile:function(){this.file=this.$refs.file.files[0],this.form.photo=this.file},createPost:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e,r,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e="".concat(x,"/upload"),r=new FormData,r.append("category",this.form.category),r.append("title",this.form.title),r.append("description",this.form.description),r.append("coordinates",this.form.coordinates),r.append("photo",this.file),_.a.post(e,r).then(function(t){console.log(t),n.posts=w.getPosts()}).catch(function(t){alert(t)});case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),deletePost:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,w.deletePost(e);case 2:return t.prev=2,t.next=5,w.getPosts();case 5:this.posts=t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](2),this.error=t.t0.message;case 11:case"end":return t.stop()}},t,this,[[2,8]])}));function e(e){return t.apply(this,arguments)}return e}()}},P=k,C=(r("ce79"),r("2877")),O=Object(C["a"])(P,c,u,!1,null,"f5dacd5a",null),$=O.exports,j=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("h1",[t._v("Register")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",name:"username",placeholder:"username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),r("br"),r("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",name:"password",placeholder:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),r("br"),r("input",{directives:[{name:"model",rawName:"v-model",value:t.password2,expression:"password2"}],staticClass:"form-control",attrs:{type:"password",name:"password2",placeholder:"password again"},domProps:{value:t.password2},on:{input:function(e){e.target.composing||(t.password2=e.target.value)}}}),r("br"),r("button",{staticClass:"btn btn-primary",on:{click:t.register}},[t._v("\n      Register\n      ")])])},U=[],R=r("bc3a"),T=function(){return R.create({baseURL:"https://localhost:3000/api/auth"})},L={register:function(t){return T().post("register",t)},login:function(t){return T().post("login",t)}},N={data:function(){return{username:"",password:"",password2:""}},watch:{username:function(t){console.log("Username changed value")}},methods:{register:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L.register({username:this.username,password:this.password,password2:this.password2});case 3:e=t.sent,this.$store.dispatch("setToken",e.data.token),this.$store.dispatch("setUser",e.data.user),this.$router.push({name:"posts"}),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),this.error=t.t0.response.data.error,console.log(this.error);case 13:case"end":return t.stop()}},t,this,[[0,9]])}));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){setTimeout(function(){})}},S=N,E=Object(C["a"])(S,j,U,!1,null,"05e56228",null),I=E.exports,M=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("h1",[t._v("Login")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",name:"username",placeholder:"username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),r("br"),r("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",name:"password",placeholder:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),r("br"),r("button",{staticClass:"btn btn-primary",on:{click:t.login}},[t._v("\n      Login\n      ")])])},D=[],F={data:function(){return{username:"",password:""}},watch:{username:function(t){console.log("Username changed value")}},methods:{login:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L.login({username:this.username,password:this.password});case 3:e=t.sent,this.$store.dispatch("setToken",e.data.token),this.$store.dispatch("setUser",e.data.user),this.$router.push({name:"posts"}),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),this.error=t.t0.response.data.error,console.log(this.error);case 13:case"end":return t.stop()}},t,this,[[0,9]])}));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){setTimeout(function(){})}},J=F,H=Object(C["a"])(J,M,D,!1,null,"361fe686",null),q=H.exports;n["default"].use(i["a"]);var z=new i["a"]({routes:[{path:"/posts",name:"posts",component:$},{path:"/register",name:"register",component:I},{path:"/login",name:"login",component:q}]}),A=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("v-app",[r("page-header"),r("main",[r("v-container",{attrs:{fluid:""}},[r("router-view")],1)],1)],1)],1)},B=[],G=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-toolbar",{staticClass:"cyan",attrs:{fixed:"",dark:""}},[r("v-toolbar-title",{staticClass:"mr-4"},[t._v("\n        Toolbar\n    ")]),r("v-toolbar-items",[r("v-btn",{attrs:{to:"posts",flat:"",dark:""}},[t._v("\n      Posts\n    ")])],1),r("v-spacer"),r("v-toolbar-items",[t.$store.state.isUserLoggedIn?t._e():r("v-btn",{attrs:{to:"login",flat:"",dark:""}},[t._v("\n        Login\n      ")])],1),r("v-toolbar-items",[t.$store.state.isUserLoggedIn?t._e():r("v-btn",{attrs:{to:"register",flat:"",dark:""}},[t._v("\n        Sign Up\n      ")])],1),r("v-toolbar-items",[t.$store.state.isUserLoggedIn?r("v-btn",{attrs:{to:"logout",flat:"",dark:""},on:{click:t.logout}},[t._v("\n        Logout\n      ")]):t._e()],1)],1)},K=[],Q={methods:{logout:function(){this.$store.dispatch("setToken",null),this.$store.dispatch("setUser",null)}}},V=Q,W=Object(C["a"])(V,G,K,!1,null,"2def3a8e",null),X=W.exports,Y={name:"app",components:{PageHeader:X}},Z=Y,tt=(r("034f"),Object(C["a"])(Z,A,B,!1,null,null,null)),et=tt.exports,rt=(r("4989"),r("ab8b"),r("bf40"),r("2f62")),nt=r("0e44");n["default"].use(rt["a"]);var st=new rt["a"].Store({strict:!0,plugins:[Object(nt["a"])()],state:{token:null,user:null,isUserLoggedIn:!1},mutations:{setToken:function(t,e){t.token=e,t.isUserLoggedIn=!!e},setUser:function(t,e){t.user=e}},actions:{setToken:function(t,e){var r=t.commit;r("setToken",e)},setUser:function(t,e){var r=t.commit;r("setUser",e)}}});n["default"].config.productionTip=!1,n["default"].use(o.a),Object(a["sync"])(st,z),new n["default"]({router:z,store:st,render:function(t){return t(et)}}).$mount("#app")},6025:function(t,e,r){},"64a9":function(t,e,r){},ce79:function(t,e,r){"use strict";var n=r("6025"),s=r.n(n);s.a}});
//# sourceMappingURL=app.13ddaebc.js.map